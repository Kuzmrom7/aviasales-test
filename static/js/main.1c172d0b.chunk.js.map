{"version":3,"sources":["logo.svg","components/Filters/index.tsx","components/Tabs/index.tsx","utils/index.ts","components/Tickets/index.tsx","components/Tickets/helpers.ts","redux/constants.ts","redux/api.ts","redux/actions.ts","redux/reducers/tickets.ts","redux/reducers/filters.ts","redux/reducers/tabs.ts","redux/state.ts","App.tsx","index.tsx"],"names":["module","exports","Filters","props","className","filters","data","map","item","key","id","onClick","e","handleClick","text","type","checked","isChecked","onChange","FilterContainer","React","memo","stopPropagation","Tabs","tabs","isActive","TabsContainer","sortByPrice","a","b","price","sortByTime","timeA","timeB","segments","forEach","duration","getInitFromLocalStorage","str","localStorage","getItem","JSON","parse","setToLocalStorage","value","setItem","stringify","Tickets","index","toLocaleString","style","currency","src","carrier","width","height","alt","origin","destination","date","second","result","add","Date","seconds","format","getTimeOnFly","hours","minutes","getBoardingTime","number","declOfNum","stops","length","join","TicketsContainer","activeTabId","tickets","isLoaded","isError","filteredTickets","appliedFilters","activeValues","filter","count","sort","includes","getFilteredTickets","activeIndex","findIndex","sortedTickets","fetchData","axios","get","response","searchId","responseTickets","slice","Error","actions","setFilters","dispatch","state","updatedFilters","f","constants","payload","setTabs","updatedTabs","fetchTickets","reducer","action","initTickets","initFilters","initTabs","App","useReducer","ticketsReducer","dispatchTickets","tabsReducer","dispatchTabs","filtersReducer","dispatchFilters","useEffect","logo","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1c172d0b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.0c089234.svg\";","import React from \"react\";\nimport { IProps } from \"./types\";\n\nimport \"./style.scss\";\nimport \"./checkbox.scss\";\n\nconst Filters: React.FC<IProps> = props => (\n  <div className=\"filters\">\n    <div className=\"filter-item\">\n      <div className=\"filter-item__title\">Количество пересадок</div>\n      <div className=\"filter-item__list\">\n        {props.filters.data.map(item => (\n          <div\n            key={item.id}\n            className=\"filter-item__element\"\n            onClick={e => props.handleClick(e, item)}\n          >\n            <div className=\"filter-item__value\">\n              <label className=\"checkbox-container\">\n                {item.text}\n                <input\n                  type=\"checkbox\"\n                  checked={item.isChecked}\n                  onChange={e => props.handleClick(e, item)}\n                />\n                <span className=\"checkmark\"></span>\n              </label>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  </div>\n);\n\nconst FilterContainer = React.memo((props: IProps) => {\n  const handleChange = (e: any, item: any) => {\n    e.stopPropagation();\n    props.handleClick(item);\n  };\n  return <Filters {...props} handleClick={handleChange} />;\n});\n\nexport default FilterContainer;\n","import React from \"react\";\nimport { IProps } from \"./types\";\n\nimport \"./style.scss\";\n\nconst Tabs: React.FC<IProps> = props => (\n  <ul className=\"tabs\">\n    {props.tabs.data.map(item => (\n      <li\n        key={item.id}\n        className={`tab ${item.isActive ? \"tab__is-active\" : \"\"}`}\n        onClick={() => props.handleClick(item)}\n      >\n        {item.text}\n      </li>\n    ))}\n  </ul>\n);\n\nconst TabsContainer = React.memo((props: IProps) => {\n  return <Tabs {...props} />;\n});\n\nexport default TabsContainer;\n","import add from \"date-fns/add\";\nimport format from \"date-fns/format\";\nimport { ITicket } from \"../definitions/interfaces\";\n\nfunction getBoardingTime(seconds: number) {\n  const hours = (seconds / 3600) ^ 0;\n  const minutes = ((seconds - hours * 3600) / 60) ^ 0;\n\n  const str = `${\n    hours === 0 ? \"\" : hours < 10 ? \"0\" + hours + \"ч\" : hours + \"ч\"\n  } ${\n    minutes === 0 ? \"\" : minutes < 10 ? \"0\" + minutes + \" м\" : minutes + \" м\"\n  }`;\n\n  return str;\n}\n\nfunction getTimeOnFly(date: string, second: number) {\n  var result = add(new Date(date), {\n    seconds: second\n  });\n\n  return `${format(new Date(date), \"HH:mm\")} : ${format(\n    new Date(result),\n    \"HH:mm\"\n  )}`;\n}\n\nfunction declOfNum(number: number) {\n  switch (number) {\n    case 0:\n      return \"Прямой\";\n    case 1:\n      return \"1 пересадка\";\n    case 2:\n      return \"2 пересадки\";\n    case 3:\n      return \"3 пересадки\";\n    case 4:\n      return \"4 пересадки\";\n\n    default:\n      return number;\n  }\n}\n\nfunction sortByPrice(a: ITicket, b: ITicket) {\n  const priceA = a.price;\n  const priceB = b.price;\n\n  if (priceA > priceB) {\n    return 1;\n  }\n  return -1;\n}\n\nfunction sortByTime(a: ITicket, b: ITicket) {\n  let timeA = 0;\n  let timeB = 0;\n\n  a.segments.forEach(e => {\n    timeA = timeA + e.duration;\n  });\n\n  b.segments.forEach(e => {\n    timeB = timeB + e.duration;\n  });\n\n  if (timeA > timeB) {\n    return 1;\n  }\n  return -1;\n}\n\nfunction getPrettyPrice(price: number) {\n  return `${price.toLocaleString(\"ru-RU\", {\n    style: \"decimal\",\n    currency: \"RUB\"\n  })} Р`;\n}\n\nfunction getInitFromLocalStorage(data: any, key: string) {\n  const str = localStorage.getItem(key);\n  if (!str) {\n    return data;\n  }\n  return JSON.parse(str || \"\");\n}\n\nfunction setToLocalStorage(key: string, value: any) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\nexport {\n  getBoardingTime,\n  getTimeOnFly,\n  declOfNum,\n  sortByPrice,\n  sortByTime,\n  getPrettyPrice,\n  getInitFromLocalStorage,\n  setToLocalStorage\n};\n","import React, { ReactElement } from \"react\";\nimport {\n  getBoardingTime,\n  getTimeOnFly,\n  declOfNum,\n  getPrettyPrice\n} from \"../../utils\";\nimport { IProps, IPropsComponent } from \"./types\";\nimport { getFilteredTickets, getSortedTickets } from \"./helpers\";\n\nimport \"./style.scss\";\n\nconst Tickets: React.FC<IPropsComponent> = ({ data }): ReactElement => {\n  return (\n    <div className=\"Tickets\">\n      {data.map((item, index) => (\n        <div className=\"ticket\" key={index}>\n          <div className=\"ticket__top\">\n            <div className=\"ticket__price\">{getPrettyPrice(item.price)}</div>\n            <div className=\"ticket__logo\">\n              <img\n                className=\"ticket-carrier__img\"\n                src={`//pics.avs.io/99/36/${item.carrier}.png`}\n                width=\"99\"\n                height=\"36\"\n                alt=\"IrAero\"\n              ></img>\n            </div>\n          </div>\n          <div className=\"ticket__bottom\">\n            {item.segments.map((item, index) => (\n              <div className=\"ticket-info\" key={index}>\n                <div className=\"ticket-endpoint\">\n                  <div className=\"ticket-endpoint__title\">\n                    {item.origin} - {item.destination}\n                  </div>\n                  <div> {getTimeOnFly(item.date, item.duration)}</div>\n                </div>\n                <div className=\"ticket-endpoint\">\n                  <div className=\"ticket-endpoint__title\">В пути</div>\n                  <div>{getBoardingTime(item.duration)}</div>\n                </div>\n                <div className=\"ticket-endpoint\">\n                  <div className=\"ticket-endpoint__title\">\n                    {declOfNum(item.stops.length)}\n                  </div>\n                  <div> {item.stops.join(\", \")}</div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst TicketsContainer = React.memo((props: IProps) => {\n  const { data, isLoaded, isError } = props.tickets;\n\n  const filters = props.filters.data;\n  const tabs = props.tabs.data;\n\n  const appliedFilters = filters.filter(e => e.isChecked);\n  const filteredTickets = getFilteredTickets(appliedFilters, data || []);\n\n  const activeIndex = tabs.findIndex(e => e.isActive === true);\n  const sortedTickets = getSortedTickets(tabs[activeIndex].id, filteredTickets);\n\n  if (isError)\n    return <div className=\"ticker-error\"> Error , please reload page</div>;\n  if (!isLoaded) return <div>....Loading data </div>;\n\n  return <Tickets data={sortedTickets} />;\n});\n\nexport default TicketsContainer;\n","import { IFilter, ITicket } from \"../../definitions/interfaces\";\n\nimport \"./style.scss\";\nimport { sortByPrice, sortByTime } from \"../../utils\";\n\nfunction getFilteredTickets(appliedFilters: IFilter[], tickets: ITicket[]) {\n  const activeValues = appliedFilters.map(e => e.value);\n\n  if (activeValues.length > 0) {\n    const filteredTickets = tickets.filter((e: ITicket) => {\n      const stops = e.segments\n        .map(e => e.stops)\n        .sort((a, b) => {\n          if (a.length < b.length) {\n            return 1;\n          }\n          return -1;\n        });\n\n      const count = stops[0].length;\n\n      if (activeValues.includes(count)) {\n        return true;\n      }\n      return false;\n    });\n    return filteredTickets;\n  }\n  return tickets;\n}\n\nfunction getSortedTickets(activeTabId: number, tickets: ITicket[]) {\n  if (activeTabId === 1) {\n    const sortedTickets = tickets.sort(sortByTime);\n    return sortedTickets;\n  }\n\n  if (activeTabId === 2) {\n    const sortedTickets = tickets.sort(sortByPrice);\n    return sortedTickets;\n  }\n\n  return tickets;\n}\n\nexport { getFilteredTickets, getSortedTickets };\n","export default {\n  FETCH_DATA: \"FETCH_DATA\",\n  SET_FILTERS: \"SET_FILTERS\",\n  SET_TABS: \"SET_TABS\",\n  SET_TICKETS: \"SET_TICKETS\",\n  SET_TICKETS_ERROR: \"SET_TICKETS_ERROR\"\n};\n","import axios from \"axios\";\n\nasync function fetchData() {\n  try {\n    const response = await axios.get(\n      \"https://front-test.beta.aviasales.ru/search\"\n    );\n    const searchId = await response.data.searchId;\n\n    const responseTickets = await axios.get(\n      `https://front-test.beta.aviasales.ru/tickets?searchId=${searchId}`\n    );\n    return responseTickets.data.tickets.slice(0, 20);\n  } catch (e) {\n    throw new Error(\"\");\n  }\n}\n\nexport { fetchData };\n","import constants from \"./constants\";\nimport { IFilter, IStateFilters } from \"../definitions/interfaces\";\nimport { fetchData } from \"./api\";\nimport { IStateTabs } from \"../definitions/interfaces\";\n\nconst actions = {\n  setFilters: (dispatch: any, state: IStateFilters, item: any) => {\n    const f = state.data;\n    let updatedFilters: IFilter[];\n\n    if (item.id === 1) {\n      let value = !item.isChecked;\n      updatedFilters = f.map(e => {\n        e.isChecked = value;\n        return e;\n      });\n    } else {\n      updatedFilters = f.map(e => {\n        if (e.id === 1) {\n          e.isChecked = false;\n        }\n        if (item.id === e.id) {\n          e.isChecked = !e.isChecked;\n        }\n        return e;\n      });\n    }\n    dispatch({\n      type: constants.SET_FILTERS,\n      payload: updatedFilters\n    });\n  },\n  setTabs: (dispatch: any, state: IStateTabs, item: any) => {\n    const t = state.data;\n    const updatedTabs = t.map(e => {\n      if (item.id === e.id) {\n        e.isActive = true;\n        return e;\n      }\n      e.isActive = false;\n      return e;\n    });\n    dispatch({ type: constants.SET_TABS, payload: updatedTabs });\n  },\n  fetchTickets: async (dispatch: any) => {\n    try {\n      const tickets = await fetchData();\n\n      await dispatch({\n        type: constants.SET_TICKETS,\n        payload: tickets\n      });\n    } catch (error) {\n      await dispatch({\n        type: constants.SET_TICKETS_ERROR\n      });\n    }\n  }\n};\n\nexport default actions;\n","import constants from \"../constants\";\nimport { IStateTickets } from \"../../definitions/interfaces\";\n\nfunction reducer(state: IStateTickets, action: any) {\n  switch (action.type) {\n    case constants.SET_TICKETS:\n      return {\n        ...state,\n        isLoaded: true,\n        data: action.payload\n      };\n\n    case constants.SET_TICKETS_ERROR:\n      return {\n        ...state,\n        isError: true,\n        isLoaded: false,\n        data: []\n      };\n\n    default:\n      throw new Error();\n  }\n}\n\nexport default reducer;\n","import constants from \"../constants\";\nimport { IStateFilters } from \"../../definitions/interfaces\";\nimport { setToLocalStorage } from \"../../utils\";\n\nfunction reducer(state: IStateFilters, action: any) {\n  switch (action.type) {\n    case constants.SET_FILTERS:\n      setToLocalStorage(\"filters\", action.payload);\n      return { ...state, data: action.payload };\n\n    default:\n      throw new Error();\n  }\n}\n\nexport default reducer;\n","import constants from \"../constants\";\nimport { IStateTabs } from \"../../definitions/interfaces\";\nimport { setToLocalStorage } from \"../../utils\";\n\nfunction reducer(state: IStateTabs, action: any) {\n  switch (action.type) {\n    case constants.SET_TABS:\n      setToLocalStorage(\"tabs\", action.payload);\n      return { data: action.payload };\n\n    default:\n      throw new Error();\n  }\n}\n\nexport default reducer;\n","import {\n  IStateTabs,\n  IStateFilters,\n  IStateTickets\n} from \"../definitions/interfaces\";\nimport { getInitFromLocalStorage } from \"../utils\";\n\nconst initTickets: IStateTickets = {\n  isLoaded: false,\n  isError: false\n};\n\nconst initFilters: IStateFilters = {\n  data: getInitFromLocalStorage(\n    [\n      { id: 1, text: \"Все\", isChecked: false, value: -1 },\n      { id: 2, text: \"Без пересадок\", isChecked: false, value: 0 },\n      { id: 3, text: \"1 пересадка\", isChecked: false, value: 1 },\n      { id: 4, text: \"2 пересадки\", isChecked: false, value: 2 },\n      { id: 5, text: \"3 пересадки\", isChecked: false, value: 3 }\n    ],\n    \"filters\"\n  )\n};\n\nconst initTabs: IStateTabs = {\n  data: getInitFromLocalStorage(\n    [\n      {\n        id: 1,\n        text: \"Самый быстрый\",\n        isActive: true\n      },\n      {\n        id: 2,\n        text: \"Самый дешевый\",\n        isActive: false\n      }\n    ],\n    \"tabs\"\n  )\n};\n\nexport { initTickets, initFilters, initTabs };\n","import React, { useReducer, Reducer, useEffect } from \"react\";\nimport Filters from \"./components/Filters\";\nimport Tabs from \"./components/Tabs\";\nimport Tickets from \"./components/Tickets\";\nimport { actions } from \"./redux\";\nimport {\n  IStateTickets,\n  IStateTabs,\n  IStateFilters\n} from \"./definitions/interfaces\";\nimport { ActionTickets, ActionTabs, ActionFilters } from \"./definitions/types\";\nimport { ticketsReducer, tabsReducer, filtersReducer } from \"./redux/reducers\";\nimport { initTabs, initFilters, initTickets } from \"./redux/state\";\n\nimport logo from \"./logo.svg\";\nimport \"./app.scss\";\n\nconst App = () => {\n  const [tickets, dispatchTickets] = useReducer<\n    Reducer<IStateTickets, ActionTickets>\n  >(ticketsReducer, initTickets);\n  const [tabs, dispatchTabs] = useReducer<Reducer<IStateTabs, ActionTabs>>(\n    tabsReducer,\n    initTabs\n  );\n  const [filters, dispatchFilters] = useReducer<\n    Reducer<IStateFilters, ActionFilters>\n  >(filtersReducer, initFilters);\n\n  useEffect(() => {\n    actions.fetchTickets(dispatchTickets);\n  }, []);\n\n  const handleClickFilter = (item: any) => {\n    actions.setFilters(dispatchFilters, filters, item);\n  };\n\n  const handleClickTab = (item: any) => {\n    actions.setTabs(dispatchTabs, tabs, item);\n  };\n\n  return (\n    <div className=\"wrap\">\n      <div className=\"header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n      </div>\n\n      <div className=\"container\">\n        <Filters handleClick={handleClickFilter} filters={filters} />\n        <div className=\"results\">\n          <div className=\"sort\">\n            <Tabs handleClick={handleClickTab} tabs={tabs} />\n            <Tickets tickets={tickets} filters={filters} tabs={tabs} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}